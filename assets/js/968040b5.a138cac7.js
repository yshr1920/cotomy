"use strict";(globalThis.webpackChunkreference_site=globalThis.webpackChunkreference_site||[]).push([[7237],{613(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"reference/getting-started/events-and-state","title":"Events and State","description":"In Cotomy, events are standard DOM events, managed in a predictable and safe","source":"@site/docs/reference/getting-started/03-events-and-state.md","sourceDirName":"reference/getting-started","slug":"/reference/getting-started/events-and-state","permalink":"/cotomy/reference/getting-started/events-and-state","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Events and State","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"First UI","permalink":"/cotomy/reference/getting-started/first-ui"},"next":{"title":"Forms Basics","permalink":"/cotomy/reference/getting-started/forms-basics"}}');var a=t(4848),i=t(8453);const l={title:"Events and State",sidebar_position:3},r="Events and State",d={},c=[{value:"Goals",id:"goals",level:2},{value:"Related Classes",id:"related-classes",level:2},{value:"Steps",id:"steps",level:2},{value:"1) Add a click event",id:"1-add-a-click-event",level:3},{value:"2) Use event delegation",id:"2-use-event-delegation",level:3},{value:"3) Modify the UI as state",id:"3-modify-the-ui-as-state",level:3},{value:"4) Event cleanup is automatic",id:"4-event-cleanup-is-automatic",level:3},{value:"Important Concept: Events Follow the DOM Lifecycle",id:"important-concept-events-follow-the-dom-lifecycle",level:2},{value:"Cotomy does not:",id:"cotomy-does-not",level:3},{value:"What just happened?",id:"what-just-happened",level:2},{value:"Next",id:"next",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"events-and-state",children:"Events and State"})}),"\n",(0,a.jsx)(n.p,{children:"In Cotomy, events are standard DOM events, managed in a predictable and safe\nway. This section shows how interaction works and why Cotomy treats the DOM as\nthe UI state."}),"\n",(0,a.jsx)(n.h2,{id:"goals",children:"Goals"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Register and remove events safely"}),"\n",(0,a.jsx)(n.li,{children:"Understand Cotomy's event delegation model"}),"\n",(0,a.jsx)(n.li,{children:"See how DOM changes represent state"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"related-classes",children:"Related Classes"}),"\n",(0,a.jsx)(n.mermaid,{value:"classDiagram\nclass CotomyElement"}),"\n",(0,a.jsx)(n.h2,{id:"steps",children:"Steps"}),"\n",(0,a.jsxs)(n.p,{children:["These steps assume you still have the ",(0,a.jsx)(n.code,{children:"card"})," element from the First UI page."]}),"\n",(0,a.jsx)(n.h3,{id:"1-add-a-click-event",children:"1) Add a click event"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'new CotomyElement(`<button class="btn">Click me</button>`).appendTo(card).on("click", () => {\n\tconsole.log("Button clicked");\n});\n'})}),"\n",(0,a.jsxs)(n.p,{children:["Cotomy uses native DOM events. ",(0,a.jsx)(n.code,{children:"on()"})," registers handlers through Cotomy's\ninternal registry to avoid leaks."]}),"\n",(0,a.jsx)(n.p,{children:"Cotomy tracks handlers centrally to prevent duplicate bindings."}),"\n",(0,a.jsx)(n.p,{children:"Events are tracked per element instance, so cleanup stays safe and predictable."}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"on()"})," attaches directly to the element. ",(0,a.jsx)(n.code,{children:"onSubTree()"})," listens once on the root\nand delegates to matching children."]}),"\n",(0,a.jsx)(n.h3,{id:"2-use-event-delegation",children:"2) Use event delegation"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'card.onSubTree("click", ".btn", () => {\n\tconsole.log("Button inside card clicked");\n});\n'})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"onSubTree()"})," listens once on the root element and delegates to matching\nchildren. This also works for elements added later with ",(0,a.jsx)(n.code,{children:"append()"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"This is especially useful in business UIs where DOM is built dynamically.\nThis avoids rebinding when the DOM changes dynamically."}),"\n",(0,a.jsx)(n.h3,{id:"3-modify-the-ui-as-state",children:"3) Modify the UI as state"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'card.onSubTree("click", ".btn", () => {\n\tcard.text = "Clicked!";\n});\n'})}),"\n",(0,a.jsx)(n.p,{children:"There is no separate state store. Changing the DOM updates the UI state\ndirectly."}),"\n",(0,a.jsx)(n.h3,{id:"4-event-cleanup-is-automatic",children:"4) Event cleanup is automatic"}),"\n",(0,a.jsx)(n.p,{children:"When an element is removed, its registered event handlers are cleared\nautomatically. Handlers are tracked per element instance."}),"\n",(0,a.jsx)(n.h2,{id:"important-concept-events-follow-the-dom-lifecycle",children:"Important Concept: Events Follow the DOM Lifecycle"}),"\n",(0,a.jsx)(n.p,{children:"Handlers are tied to the element instance. When the element leaves the\ndocument, its event registrations are cleared. This prevents cross-page leaks\nand stale listeners."}),"\n",(0,a.jsx)(n.h3,{id:"cotomy-does-not",children:"Cotomy does not:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Wrap events in a synthetic event system"}),"\n",(0,a.jsx)(n.li,{children:"Re-dispatch events through a global bus"}),"\n",(0,a.jsx)(n.li,{children:"Require manual unbinding in normal page flows"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"what-just-happened",children:"What just happened?"}),"\n",(0,a.jsx)(n.p,{children:"You:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Registered DOM events"}),"\n",(0,a.jsx)(n.li,{children:"Used delegated handling"}),"\n",(0,a.jsx)(n.li,{children:"Changed the UI directly"}),"\n",(0,a.jsx)(n.li,{children:"Let Cotomy manage handler lifecycle"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"This is how Cotomy keeps interaction simple and predictable."}),"\n",(0,a.jsx)(n.h2,{id:"next",children:"Next"}),"\n",(0,a.jsxs)(n.p,{children:["Next: ",(0,a.jsx)(n.a,{href:"/cotomy/reference/getting-started/forms-basics",children:"Forms Basics"})," to structure submissions."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},8453(e,n,t){t.d(n,{R:()=>l,x:()=>r});var s=t(6540);const a={},i=s.createContext(a);function l(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);